# üõ†Ô∏è Gestion des exceptions en Java avec try-catch

## üîπ Qu'est-ce qu'une exception ?

Une **exception** est un √©v√©nement qui perturbe le d√©roulement normal d'un programme. En Java, les exceptions sont des objets qui d√©crivent une erreur.

## üîπ Structure d'un bloc `try-catch`

```java
try {
    // Code susceptible de g√©n√©rer une exception

} catch (ExceptionType1 nomVariable1) {
    // Code ex√©cut√© en cas d'exception du type ExceptionType1

} catch (ExceptionType2 nomVariable2) {
    // Code ex√©cut√© en cas d'exception du type ExceptionType2

// Autres blocs catch (si n√©cessaires)...

} finally {
    // Code ex√©cut√© pour compl√©ter l'op√©ration
}
```

### Remarques sur la structure `try-catch`

- Le bloc `try` est **obligatoire** et contient au moins une instruction susceptible de causer une exception. On n'en retrouve qu'**un seul** par structure.
- Le bloc `catch` est **obligatoire** et contient le code √† √©x√©cuter si une exception du type sp√©cifi√© entre parenth√®ses est intercept√©. On **peut en rencontrer plusieurs** dans une m√™me structure `try`, mais il en faut **au moins un**.
- L'**ordre** des blocs `catch` est **important** : il doit intercepter les exceptions **des plus sp√©cifiques aux plus g√©n√©rales**. Voir la [hi√©rarchie des exception en Java](https://rollbar.com/wp-content/uploads/2021/07/java-exceptions-hierarchy-example.png) pour plus de pr√©cisions.
- Le bloc `finally` est **optionnel**. On l'utilise habituellement pour effectuer un travail suite √† la gestion d'une exception. Par exemple : fermer les ressources qui tentent d'acc√©der √† un fichier introuvable.

## üîπ Exemple conceptuel

```java
try {
    // Code √† risque de causer des IOException ou ArrayIndexOutOfBoundsException
} catch (IOException e) {
    System.out.println("Erreur d'entr√©e/sortie : " + e.getMessage());
} catch (ArrayIndexOutOfBoundsException e) {
    System.out.println("Indice de tableau invalide.");
} catch (Exception e) {
    System.out.println("Autre exception : " + e.getMessage());
}
```

## üîπ Les exceptions courantes en Java

### 1. `IOException`

- Se produit lors d'une erreur d'entr√©e/sortie.
- Exemple : lecture ou √©criture dans un fichier inaccessible.

### 2. `FileNotFoundException`

- Sous-classe de `IOException`.
- Se produit lorsque le fichier sp√©cifi√© n'existe pas.

### 3. `ArrayIndexOutOfBoundsException`

- Se produit lorsqu'on tente d'acc√©der √† un indice invalide dans un tableau.

### 4. `NullPointerException`

- Se produit lorsqu'on tente d'utiliser une r√©f√©rence null.

### 5. `ArithmeticException`

- Se produit lors d'une op√©ration math√©matique invalide (ex : division par z√©ro).

### 6. `InputMismatchException`

- Se produit lorsqu'on utilise une m√©thode d'extraction avec un objet `Scanner` et que la donn√©e saisie n'est pas du type attendu. Par exemple si on extrait du texte avec `.nextInt()` ou `.nextDouble()`.

### 7. `NumberFormatException`

- Se produit lorsqu'on tente de convertir du texte en un type num√©rique. Exemples : `Integer.parseInt("Un");` ou encore `Double.parseDouble("");`.

## üîπ Exemple complet

```java
import java.io.*;

public class ExempleExceptions {
    public static void main(String[] args) {
        String[] noms = {"Alex", "Bob"};
        try {
            System.out.println(noms[2]); // ArrayIndexOutOfBoundsException si diff√©rent de 0, 1
            BufferedReader reader = new BufferedReader(new FileReader("fichier.txt")); // FileNotFoundException si fichier inexistant
            String ligne = reader.readLine(); 
            reader.close();
        } catch (FileNotFoundException e) {
            System.out.println("Fichier introuvable : " + e.getMessage());
        } catch (IOException e) {
            System.out.println("Erreur d'E/S : " + e.getMessage());
        } catch (ArrayIndexOutOfBoundsException e) {
            System.out.println("Indice hors limites : " + e.getMessage());
        }
    }
}
```

## üîπ Bonnes pratiques

- Utiliser les structures `try-catch` avec parcimonie, car elles alourdissent le code.
- Dans la mesure du possible, ne mettre que les instructions pouvant causer des erreurs dans le bloc `try`.
- Utiliser des blocs `catch` sp√©cifiques avant les g√©n√©riques. Voir la [hi√©rarchie](https://rollbar.com/wp-content/uploads/2021/07/java-exceptions-hierarchy-example.png).
- Utiliser `finally` si n√©cessaire pour fermer les ressources (fichiers, flux).

```java
try {
    // Code potentiellement probl√©matique
} catch (Exception1 e1) {
    // Gestion de l'exception de type Exception1 (autant de blocs que n√©cessaire)
} finally {
    // Toujours ex√©cut√©, optionnel
}
```
